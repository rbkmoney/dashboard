<div class="dsh-float-panel" [ngStyle]="{ 'min-height': baseContentHeight + 40 + 'px' }">
    <dsh-card
        class="dsh-float-panel-card"
        [ngClass]="{
            'dsh-float-panel-card-unpinned': !pinned || !expanded
        }"
        (dshResized)="cardHeight = $event.height"
    >
        <div (dshResized)="baseContentHeight = $event.height">
            <div fxLayout fxLayoutGap="20px" fxLayout.xs="column" fxLayoutAlign.xs="center stretch" fxLayoutGap.xs="0">
                <!--need this additional div because invisible resize-sensor affects render-->
                <div class="dsh-float-panel-base">
                    <ng-content></ng-content>
                </div>
                <div fxLayout class="dsh-float-panel-actions" fxLayoutAlign="center center">
                    <button dsh-icon-button (click)="expandToggle()" @hide *ngIf="!expanded" fxHide.xs>
                        <mat-icon>expand_more</mat-icon>
                    </button>
                    <button dsh-button (click)="expandToggle()" fxFlex="100" fxHide fxShow.xs>
                        {{ (expanded ? 'common.collapse' : 'common.showMore') | lc }}
                    </button>
                </div>
            </div>
        </div>
        <div class="dsh-float-panel-more" [@expand]="expandTrigger" *ngIf="expanded">
            <div (dshResized)="setMoreContentHeight($event.height)">
                <div fxLayout="column" fxLayoutGap="20px">
                    <div class="dsh-float-panel-more-content">
                        <ng-container *ngTemplateOutlet="floatPanelMore?.templateRef"></ng-container>
                    </div>
                    <div fxLayout="row" fxLayoutGap="20px" fxLayoutAlign="space-between">
                        <button dsh-icon-button (click)="pinToggle()">
                            <mat-icon svgIcon="place_outline"></mat-icon>
                        </button>
                        <div>
                            <ng-container *ngTemplateOutlet="floatPanelActions?.templateRef"></ng-container>
                        </div>
                        <button dsh-icon-button (click)="expandToggle()">
                            <mat-icon>expand_less</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </dsh-card>
</div>
