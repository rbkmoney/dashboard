<div class="wrapper">
    <div #substrate [ngStyle]="{ height: pinned ? 0 : cardHeight.base + 'px' }"></div>
    <div [ngStyle]="{ height: cardHeight.current + 'px' }" class="body-extender"></div>
    <ng-container #container [ngTemplateOutlet]="template" *ngIf="pinned"></ng-container>
</div>
<ng-template #template>
    <div class="card-wrapper">
        <dsh-card #card>
            <dsh-card-content>
                <div fxLayout="row" fxLayoutGap="20px" class="dsh-float-panel-base">
                    <div fxFlex><ng-content></ng-content></div>
                    <div @hide *ngIf="!expanded">
                        <button dsh-button (click)="expandToggle()">
                            <mat-icon svgIcon="user" style="height:16px"></mat-icon>
                        </button>
                    </div>
                </div>
                <div
                    class="dsh-float-panel-more-wrapper"
                    [@expand]="expandTrigger"
                    (@expand.start)="expandStart($event)"
                    (@expand.done)="expandDone($event)"
                    *ngIf="expanded"
                >
                    <div #moreContent fxLayout="column" fxLayoutGap="20px">
                        <div>
                            <ng-container *ngTemplateOutlet="floatPanelMore?.templateRef"></ng-container>
                        </div>
                        <div fxLayout="row" fxLayoutGap="20px" fxLayoutAlign="space-between">
                            <button dsh-button (click)="pinToggle()">
                                <mat-icon svgIcon="notification" style="height:16px"></mat-icon>
                            </button>
                            <div>
                                <ng-container *ngTemplateOutlet="floatPanelActions?.templateRef"></ng-container>
                            </div>
                            <button dsh-button (click)="expandToggle()">
                                <mat-icon svgIcon="user" style="height:16px"></mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </dsh-card-content>
        </dsh-card>
    </div>
</ng-template>
