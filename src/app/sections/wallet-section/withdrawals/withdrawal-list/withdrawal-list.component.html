<dsh-expand-panel-accordion
    fxLayout="column"
    fxLayoutGap="20px"
    (expandedChange)="select($event)"
    [expanded]="selectedId$ | async"
>
    <dsh-expand-panel *ngFor="let withdrawal of withdrawals">
        <div fxLayout fxLayoutAlign="space-between" fxLayoutGap="10px">
            <div fxLayout="column" fxLayoutGap="10px">
                <div class="mat-caption">{{ (getWallet(withdrawal.wallet) | async)?.name }}</div>
                <div *transloco="let status; scope: 'withdrawals'; read: 'withdrawals.status'" class="mat-body-1">
                    {{ status[withdrawal.status] }}
                </div>
            </div>
            <div fxLayout="column" fxLayoutAlign="center end" fxLayoutGap="10px">
                <div class="mat-body-2">
                    {{ withdrawal.body.amount | toMajor | amount }}
                </div>
                <div class="mat-caption">
                    {{ withdrawal.body.currency }}
                </div>
            </div>
        </div>
        <dsh-expand-panel-more>
            <dsh-expand-panel-more-header>
                <div
                    *transloco="let t; scope: 'withdrawals'; read: 'withdrawals.withdrawal'"
                    class="mat-caption"
                    fxFlex
                >
                    {{ t.deposit }} #{{ withdrawal.id }}
                </div>
            </dsh-expand-panel-more-header>

            <div
                *transloco="let t; scope: 'withdrawals'; read: 'withdrawals.withdrawal'"
                class="container"
                fxLayout="column"
                fxLayoutGap="20px"
            >
                <div class="mat-headline">
                    {{ withdrawal.body.amount | toMajor | currency: withdrawal.body.currency }}
                </div>
                <dsh-details-item fxFlex [title]="t.walletName">
                    <div class="mat-body-1">
                        <span *ngIf="getWallet(withdrawal.wallet) | async as wallet; else noWallet">{{
                            wallet.name
                        }}</span>
                        <ng-template #noWallet>.</ng-template>
                    </div>
                </dsh-details-item>
                <div fxLayout fxLayout.sm="column" fxLayoutGap="10px">
                    <dsh-details-status-item
                        *transloco="let status; scope: 'withdrawals'; read: 'withdrawals.status'"
                        fxFlex
                        class="mat-body-1"
                        [color]="statusToColor(withdrawal.status)"
                        [text]="status[withdrawal.status]"
                    ></dsh-details-status-item>
                    <dsh-details-item fxFlex class="mat-body-1" [title]="t.createdAt">{{
                        withdrawal.createdAt | date: 'dd MMMM yyyy, HH:mm'
                    }}</dsh-details-item>
                    <div fxFlex></div>
                </div>
                <div fxLayout fxLayout.sm="column" fxLayoutGap="10px">
                    <dsh-details-item fxFlex class="mat-body-1" [title]="t.amount">{{
                        withdrawal.body.amount | toMajor | currency: withdrawal.body.currency
                    }}</dsh-details-item>
                    <dsh-details-item fxFlex class="mat-body-1" [title]="t.fee">{{
                        withdrawal.fee.amount | toMajor | currency: withdrawal.fee.currency
                    }}</dsh-details-item>
                    <dsh-details-item fxFlex class="mat-body-1" [title]="t.total">{{
                        withdrawal.body.amount - withdrawal.fee.amount | toMajor | currency: withdrawal.body.currency
                    }}</dsh-details-item>
                </div>
                <dsh-details-item *ngIf="withdrawal.failure" fxFlex [title]="t.error">
                    <div class="mat-body-1">{{ t.errors[withdrawal.failure.code] }}</div>
                </dsh-details-item>
            </div>
        </dsh-expand-panel-more>
    </dsh-expand-panel>
</dsh-expand-panel-accordion>
