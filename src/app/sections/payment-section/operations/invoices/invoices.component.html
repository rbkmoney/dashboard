<div fxLayout="column" fxLayoutGap="20px" *transloco="let i; scope: 'invoices'; read: 'invoices'">
    <div fxLayout="column" fxLayoutAlign=" end">
        <button dsh-stroked-button color="accent" (click)="create()">{{ i.create.button }}</button>
    </div>
    <dsh-search-form (formValueChanges)="search($event)" [shopsInfo]="shopsInfo$ | async"></dsh-search-form>
    <dsh-card>
        <dsh-card-content *transloco="let t" fxLayout="column" fxLayoutGap="15px">
            <dsh-spinner
                *ngIf="doAction$ | async | debounce; else updated"
                [type]="spinnerType"
                size="20"
            ></dsh-spinner>
            <ng-template #updated>
                <dsh-last-updated
                    *ngIf="!(doAction$ | async | debounce)"
                    (update)="refresh()"
                    [lastUpdated]="lastUpdated$ | async"
                ></dsh-last-updated>
            </ng-template>
            <dsh-invoices-table [data]="tableData$ | async"></dsh-invoices-table>
            <dsh-empty-search-result
                *ngIf="!(tableData$ | async)?.length && !(doAction$ | async)"
            ></dsh-empty-search-result>
            <button *ngIf="hasMoreInvoices$ | async" (click)="fetchMore()" dsh-button>
                {{ (doAction$ | async | debounce) ? t.loading : t.showMore }}
            </button>
        </dsh-card-content>
    </dsh-card>
</div>
